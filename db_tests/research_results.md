### Данные по итогам 100 подряд проведенных тестов


#### Тестируем cassanda:  

Схема данных: 2 node (реплики)

Без нагрузки

| Тест                                      |     min - max, s:ms     | median, s:ms |
|-------------------------------------------|:-----------------------:|:------------:|
| insert test                               |  0: 5 435 - 0: 15 572   |   0: 6 488   |
| get all from 2 000 000 obj test           | 0: 49 099 - 0: 902 875  |  0: 72 526   |
| select where timestamp = 1 where from 10 000 000 obj test | 0: 678 426 - 1: 119 818 |  0: 695 296  |
| SELECT sum(timestamp) FROM test.views WHERE timestamp > 50 from 10 000 000 obj test |        get error        |  get error   |


С нагрузкой (запущен параллельно процесс записывающий по 100 записей в 0,01 сек)

| Тест        |     min - max, s:ms     | median, s:ms |
|-------------|:-----------------------:|:------------:|
| insert test |    0: 7 584 - 27 762    |  0: 13 239   |
| select where timestamp = 1 from 10 000 000 obj test | 0: 762 829 - 1: 371 429 |  0: 789 158  |
| SELECT sum(timestamp) FROM test.views WHERE timestamp > 50 from 10 000 000 obj test | get error    |  get error     |


#### Тестируем clickhouse:  

Схема данных: 4 node (2 реплики, 2 партиции)

Без нагрузки

| Тест                                               |     min - max, s:ms     | median, s:ms |
|----------------------------------------------------|:-----------------------:|:------------:|
| insert test                                        |  0: 3 512 - 0: 16 689   |   0: 4 889   |
| get all from 2 000 000 obj test                    |  0: 30 717 - 0: 46 275  |  0: 33 772   |
| select where timestamp = 1 from 10 000 000 obj test | 0: 636078 - 0: 733 061  |  0: 668 870  |
| SELECT sum(timestamp) FROM test.views WHERE timestamp > 50 from 10 000 000 obj test | 0: 038 698 - 0: 100 078 |  0: 041 365  |


С нагрузкой (запущен параллельно процесс записывающий по 100 записей в 0,01 сек)

| Тест        |     min - max, s:ms     | median, s:ms |
|-------------|:-----------------------:|:------------:|
| insert test |    0: 4 098 - 14 540    |   0: 6 614   |
| select where timestamp = 1 from 10 000 000 obj test | 0: 907 240 - 5: 250 530 |  1: 554 646  |
| SELECT sum(timestamp) FROM test.views WHERE timestamp > 50 from 10 000 000 obj test | 0: 047 936 - 0: 091 991 |  0: 054 389  |


В процессе тестирования Cassandra были выявлены следующие минусы:  
- получаем ошибку при агрегирующем запросе при базе с 10 000 000 объектов, 
  хотя аналогичный запрос при почти пустой базе проходит
- сложная настройка конфигураций Пример: 
1) Нужно очень хорошо продумать заранее 
  какие запросы будут отправляться в базу перед тем как формировать ключ 
  партиции и прочее. 
2) Изначально планировала 4 node (2 партиции и 2 реплики) для сопоставимости 
   тестирования с clickhouse. Но докер не тянет больше 3 (или возвращаемся к 1 
   пункту - сложно конфигурировать или не тянет по ресурсам, склоняюсь ко 2)
пр.

Дополнительно почитав сравнительные характеристики Cassandra и clickhouse в 
интернете сделала вывод, что сам по себе clickhouse более молодая, удобная, 
быстрая бд. 

Итог: выбираем clickhouse  